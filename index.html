<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tax Debt Consultation Feedback Study</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/tesseract.js@5/dist/tesseract.min.js"></script>
    <style type="text/css">
        body {
            font-family: 'Inter', sans-serif;
        }
        .header-gradient {
            background: linear-gradient(120deg, #1e3a8a 0%, #3b82f6 100%);
        }
        .action-btn {
            transition: background-color 0.3s, transform 0.2s;
            cursor: pointer;
        }
        .action-btn:hover {
            transform: translateY(-2px);
        }
        .qualification-list li {
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="%2322c55e" stroke-width="2.5" stroke-linecap="round" stroke-linejoin="round"><path d="M20 6L9 17l-5-5"/></svg>') no-repeat left center;
            padding-left: 30px;
            margin-bottom: 8px;
        }
        .loader {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        .disabled-btn {
            opacity: 0.5;
            pointer-events: none;
            cursor: not-allowed;
        }
    </style>
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen p-4">

<div class="w-full max-w-4xl mx-auto bg-white rounded-2xl p-6 md:p-8 lg:p-12 shadow-xl">
    
    <div id="mainContent">
        <div class="header-gradient mb-8 p-6 rounded-xl text-white text-center">
            <h1 class="text-2xl md:text-3xl font-bold">Tax Debt Consultation Research</h1>
            <p class="mt-2 text-base md:text-lg">Help us understand the process of receiving a free tax debt consultation.</p>
        </div>

        <div class="p-4 bg-gray-50 border border-gray-200 rounded-lg mb-6">
            <h2 class="text-xl font-semibold text-gray-800 mb-3">Who Can Participate?</h2>
            <p class="text-gray-700 mb-4">We are seeking feedback from individuals to better understand the tax debt consultation process. Please proceed if you meet the following qualifications:</p>
            <ul class="qualification-list list-none">
                <li>You owe more than $10,000 in tax debt.</li>
                <li>You are interested in hearing about potential relief options.</li>
            </ul>
        </div>
        
        <div class="p-4 bg-blue-50 border border-blue-200 rounded-lg mb-6">
            <h2 class="text-xl font-semibold text-blue-800 mb-3">How To Participate</h2>
            <ol class="list-decimal list-inside text-gray-700 space-y-2">
                <li><strong>Complete the form below</strong> to request your free, no-obligation consultation.</li>
                <li>After submitting your number, <strong>you will receive an instant call</strong> from a bot with a 4-digit OTP to verify your phone number. Please complete this step.</li>
                <li>Once verified, you will see a confirmation page. <strong>Take a screenshot</strong> of this page.</li>
                <li>For the research, you must <strong>call the toll-free number</strong> shown on the confirmation page. Please call during their operating hours (9 am - 9 pm EST).</li>
                <li><strong>Upload your screenshot</strong> of the confirmation page in the verification section below to unlock the "Finish Survey" button.</li>
                <li>After your call, <strong>send us an email</strong> with your feedback on the experience.</li>
            </ol>
        </div>

        <div class="p-4 bg-green-50 border border-green-200 rounded-lg mt-8">
            <h3 class="text-lg font-semibold text-green-800">üìß Share Your Feedback & Win! üí∞</h3>
            <p class="text-gray-700 mt-2">The goal of this research is to hear about your experience. After a specialist has contacted you, please email us your feedback.</p>
            <p class="mt-3">
                <strong>Email:</strong> <a href="mailto:apkconnex@gmail.com?subject=Feedback%20on%20Tax%20Debt%20Service" class="text-blue-600 hover:underline">apkconnex@gmail.com</a>
            </p>
            <div class="mt-4 pt-4 border-t border-green-200">
                <p class="font-bold text-green-700">üéÅ As a thank you, participants who email their feedback will stand a chance to win a <span class="text-xl">$500</span> Walmart voucher.</p>
            </div>
        </div>
        
        <h2 class="text-2xl font-bold text-center text-gray-800 my-6">Step 1: Request Your Free Consultation Below</h2>
    
        <div class="w-full h-[600px] border-4 border-gray-200 rounded-lg overflow-hidden">
            <iframe src="https://shareasale.com/r.cfm?b=221193&u=3237691&m=26522&urllink=&afftrack=" class="w-full h-full border-0"></iframe>
        </div>
        
        <div class="p-4 bg-orange-50 border border-orange-200 rounded-lg mt-8">
            <h3 class="text-lg font-semibold text-orange-800">Step 2: Verify Your Form Submission</h3>
            <p class="text-gray-700 mt-2">Please upload a screenshot of the confirmation page you see after completing the form.</p>
            <div class="mt-4">
                <input type="file" id="imageUpload" accept="image/*" class="w-full text-sm text-gray-500 file:mr-4 file:py-2 file:px-4 file:rounded-full file:border-0 file:text-sm file:font-semibold file:bg-blue-100 file:text-blue-700 hover:file:bg-blue-200"/>
            </div>
            <div class="mt-4 text-center">
                <button id="validateButton" class="action-btn w-full md:w-auto bg-green-600 hover:bg-green-700 text-white font-bold py-3 px-8 rounded-lg">Verify Screenshot</button>
            </div>
            <div id="validationResult" class="mt-4 text-center font-semibold" style="display: none;"></div>
        </div>

        <div class="p-4 bg-yellow-50 border border-yellow-200 rounded-lg mt-8">
            <h3 class="text-lg font-semibold text-yellow-800">‚ùó Important: Please Read Before Finishing</h3>
            <p class="text-gray-700 mt-2">
                To be eligible for the voucher, you must complete the form above. We have a way of knowing if the form was not completed, and in such cases, payment will not be issued. If you do not wish to complete the form, please click the "Abandon Survey" button below.
            </p>
        </div>

        <div class="mt-8 flex justify-center gap-4">
            <button id="abandonSurveyButton" class="action-btn inline-block bg-red-600 hover:bg-red-700 text-white font-bold py-3 px-6 rounded-lg">Abandon Survey</button>
            <button id="finishSurveyButton" class="action-btn inline-block bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-6 rounded-lg disabled-btn">Finish Survey</button>
        </div>
    </div>

</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const urlParams = new URLSearchParams(window.location.search);
    let transactionId = urlParams.get('transaction_id') || urlParams.get('RID');

    if (!transactionId) {
        transactionId = 'tx_' + Date.now().toString(36) + Math.random().toString(36).substring(2);
    }

    const abandonSurveyButton = document.getElementById('abandonSurveyButton');
    const finishSurveyButton = document.getElementById('finishSurveyButton');
    const validateButton = document.getElementById('validateButton');
    const imageUpload = document.getElementById('imageUpload');
    const validationResult = document.getElementById('validationResult');
    
    const abandonUrl = `https://spectrumsurveys.com/surveydone?st=18&transaction_id=${transactionId}`;
    const finishUrl = `https://spectrumsurveys.com/surveydone?st=21&transaction_id=${transactionId}`;
    
    abandonSurveyButton.addEventListener('click', function() {
        window.open(abandonUrl, '_blank');
    });

    finishSurveyButton.addEventListener('click', function() {
        if (!this.classList.contains('disabled-btn')) {
            window.open(finishUrl, '_blank');
        }
    });

    validateButton.addEventListener('click', async function() {
        if (!imageUpload.files || imageUpload.files.length === 0) {
            validationResult.textContent = '‚ùå Please upload the screenshot first.';
            validationResult.style.color = 'red';
            validationResult.style.display = 'block';
            return;
        }

        const file = imageUpload.files[0];
        validationResult.style.display = 'block';
        validationResult.style.color = 'orange';
        validationResult.innerHTML = '<div class="loader mx-auto"></div><p>Analyzing screenshot...</p>';
        validateButton.disabled = true;
        finishSurveyButton.classList.add('disabled-btn');

        try {
            const worker = await Tesseract.createWorker('eng');
            const { data: { text } } = await worker.recognize(file);
            await worker.terminate();
            
            const lowerCaseText = text.toLowerCase();
            
            // --- CORRECTED OCR VALIDATION LOGIC ---
            // Looks for specific phrases from the tax debt confirmation page.
            const confirmationKeywords = ['curadebt tax account executive', 'free case review'];
            const isConfirmed = confirmationKeywords.some(keyword => lowerCaseText.includes(keyword));
            
            if (isConfirmed) {
                validationResult.textContent = '‚úÖ Screenshot validated successfully! You can now finish the survey.';
                validationResult.style.color = 'green';
                finishSurveyButton.classList.remove('disabled-btn');
            } else {
                validationResult.textContent = '‚ùå Confirmation text not found. Please upload the correct screenshot.';
                validationResult.style.color = 'red';
            }
        } catch (error) {
            console.error("OCR Error:", error);
            validationResult.textContent = '‚ùå Error analyzing image. Please try again.';
            validationResult.style.color = 'red';
        } finally {
            validateButton.disabled = false;
        }
    });
});
</script>

</body>
</html>

